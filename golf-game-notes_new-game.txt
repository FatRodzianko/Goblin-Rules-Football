### new game idea for after (at least trying to) finishing the level editor

# Gameplay Idea
- combination of CardConquest and that HeroCard game/slay the spire?
- - - Goblin units that you command on a hex grid
- - - You have a "hand" of cards that you play during battles
- - - Player and enemy AI
- - - - - - potentially make multiplayer?
- - - - - - - - - a "versus" mode where one player is trying to stop the other from advancing through the game / playing in stead of the CPU player
- - - - - - - - - 3 person teams? Just increase map size and enemy unit amount?
- - - You are escorting a bomb you must protect from enemies
- - - - - - win a level by killing all enemy units or capturing the enemy "base"/stronghold? on the level
- - - reach "check points" where you drop off a bomb to explode
- - - - - - will be a "boss" battle of sorts
- - - - - - - - - four bosses? Maybe five
- - - if all your units die, you lose. Start over?
- - - - - - maybe have player chose to start over or at last checkpoint
- - - if enemy captures your bomb, you lose
- - - - - - can attach bomb to units to make escorting easier
- - - - - - but if that unit is killed, the bomb is captured
- - - At the beginning of each turn, get new cards
- - - - - - maybe show player 2 cards, they choose one
- - - - - - - - - cards are random per level?
- - - - - - then player can remove a certain number of cards. The "power" of the discarded cards can go toward a currency, that is spent on new cards?
- - - - - - - - - currency doesn't carry over though, use it or lose it?
- - - - - - - - - maybe can also use discarded card power to buy power ups?
- - - the "checkpoints" are where boss battles will be
- - - - - - player needs to drop bomb off at boss camp/outpost
- - - - - - boss music!
- - - - - - bosses are like a siege or something? Player is trying to take a "castle" type structure
- - - - - - - - - hexes are marked as fortications
- - - - - - - - - player can take them one by one, or go through to the "heart" of the outpost and immediately defeat them
- - - - - - center of outpost will have the boss unit
- - - - - - - - - special character. Extra strong. Will have some unique abilities like more attack/whatever, special modifiers in battles, stuff like that
- - - - - - - - - - - - new sprite for each...
- - - - - - - - - Boss idea: bomb thrower
- - - - - - - - - - - - throws bombs towards your units, especially focused on the unit with the bomb (or just at the bomb if you aren't carrying it)
- - - - - - - - - - - - bombs take 2 turns to exploded: damage anything in a 1 tile radius from the bombs tile
- - - - - - - - - - - - - - - if your bomb/bombcarrier is in an explosion radius, your bomb detonates and you lose!
- - - - - - - - - - - - bombs that take 3 turns, explosion radius of 2?
- - - when a boss is defeated, choose between two upgrades?
- - - - - - each upgrade randomly chosen? Or have an option to have "set" upgrades?
- - - player must kill the final boss to beat the game or "run"
- - - new run+?
- - - - - - give player's option to due more runs if they beat one, make it substantially harder?
- - - - - - only way to carry over to next game?
- - - maybe after a player makes a run, they can keep 1 power up or 1 card to carry over to next run?
- - - - - - way to "upgrade" in some sense between runs, making subsequent runs easier?
- - - - - - get more units, cards, better starting cards, greater hand size to start, etc?
- - - - - - maybe the way you upgrade is the collective value of the deck you built
- - - - - - - - - use that value to buy permenant upgrades, like discussed above?
- procedurally generate each new "level"?
- - - also have the enemy squad generated new for each level
- - - and the enemy's hand
- "sneak" action
- - - move half normal distance BUT make no noise, so enemies won't detect you
- - - have to turn off light/smother torch. Reveal less fog of war as you pass through. Basically only see tiles immediately around you
- "Low Light Vision"
- - - without a torch, can only see immediate surroundings
- - - can faintly see torches in the distance. Fog turns a light grey to show there is a torch, but you can't see what is near the torch/light until you get close
- - - ability to upgrade low light vision to increase distance you can see lights from, and see farther from your light
- Other "actions"
- - - open doors / interact
- - - - - - dungeons should have multiple paths. Some will be closed off by doors
- - - - - - unlocked doors can be opened, but they make a noise detectable by enemies
- - - - - - - - - "grease can" upgrade to lower distance noise from door open travels?
- - - - - - some doors require multiple "switches" to be opened in different locations to open?
- - - - - - - - - make the switches have to be opened on the same turn, forcing player to split up group to get by this?
- - - - - - should try to make it so there is always an "open" path to the end, but it is long and full of enemies? Or maybe not
- - - unlock doors/pick locks/smash open
- - - - - - some doors will be locked
- - - - - - You can choose to smash them open (if you have a heavy unit?), but makes a ton of noise
- - - - - - blow up door if you have an engineer?
- - - - - - if you have a lock picker, you can pick the lock
- Special unit types for special actions
- - - selected at beginning of game, and can be "won" or trained after completing levels?
- - - depending on the special unit type, may have some starts lowered for balance?
- - - - - - lock picker
- - - - - - - - - picks locks on doors
- - - - - - - - - does very little combat damage
- - - - - - engineer
- - - - - - - - - blows open doors
- - - - - - - - - dig through some "soft" walls. Makes a lot of noise without upgrades though?
- - - - - - - - - low combat damage, unless they spent a turn "making grenades" or something?
- - - - - - - - - - - - using a grenade during a battle will make a lot of noise though
- - - - - - heavy infantry
- - - - - - - - - can break down dooors
- - - - - - - - - extra combat damage
- - - - - - - - - - - - requires 2 "attack" from an opponents card to kill?
- - - - - - - - - low movement
- - - - - - scout
- - - - - - - - - moves twice as fast
- - - - - - - - - better low light vision, so can see farther
- - - - - - - - - less combat damage
- - - - - - ranged
- - - - - - - - - more combat damage when acting as a reinforcement
- - - - - - - - - less combat damage when on the tile being attacked?
- Instead of battles occuring when players end turn on same tile, they only need to be adjacent?
- - - can make the rooms a little bigger that way? More room to move in
- - - direction units were moving in before the battle can cause things to be "flanked" or attacked from behind
- - - - - - if unit was moving straight forward, and enemy unit is in the tile directly infront of them, direct attack
- - - - - - if one unit was moving forward toward the battle tile, and the other is moving away, then flank attack?
- - - - - - - - - the units being flanked do less overall combat damage. Flanking units gain 1 attack/sword to kill units?
- - - - - - only have a unit be "flanked" if the are moving directly away from the battle site, or left/right, or back and left/right. Diagonal toward the battle site isn't a flank?

# Lore?
- team of sapper goblins escorting bomb through mines
- - - need to proect the bomb from attackers
- - - if enemy captures your bomb, you lose


### Tasks to get a PoC going?
- Creating a hex grid with hex tiles
- - - https://www.youtube.com/watch?v=9WElejje6Sc
- - - https://www.youtube.com/watch?v=Vt6hM6f9-Dk
- - - https://www.youtube.com/watch?v=0nXmuJuWS8I
- movement on a hex grid
- - - https://youtu.be/htZijEO7ZmE?si=gfo-SYl1lne9AJIT
- generate a hex grid
- - - load from a saved "map"/json file
- - - auto generate a new level, with tiles you can move on and tiles you can't (obstacles and walls)
- - - - - - walls surrounding the outside of the level
- AI/Opposing player moves their characters in response to yours
- - - AI will move toward player and their bomb
- - - AI will attack if they have an advantage (greater army than player on a tile) or if they don't have a path to retreat)
- player achieving goal (capturing the flag/planting bomb) ends level, new level is generated
- cards and battle system following card conquest
- - - detect battles
- - - show player and oppnent decks/hands
- - - player chooses card
- - - opponent AI chooses their "best" card if they can win, "worst" card if it looks like a sure defeat
- turn based strategy course from code monkey?
- - - https://unitycodemonkey.com/courses.php?c=turnbasedstrategy

### First steps to get started
- Created a hex grid with tiles
- - - try as hex first (flat top? pointy top?)
- - - - - - see this aseprite tool for creating hex tiles? https://www.reddit.com/r/aseprite/comments/1awquqn/created_a_tool_for_creating_isometric_hexagonal/
- - - - - - CodeMonkey tutorial was for pointy top. I think for flat top all I'd change is have a horizontal offset of 0.75 instead of a vertical offset. So, change HEX_VERTICAL_OFFSET_MULTIPLIER to HEX_Horizontal_OFFSET_MULTIPLIER
- - x if creating hex pixel art tiles is too difficult/annoying, just switch to a rectangle grid
- - - - - x think Core Keeper for asethetic
x Detect mouse click on a grid tile
- - x highlight the correct grid position when clicked on
x Have a unit that is on the grid
- - x make unit selectable by clicking on them
- - - - - x selectable by clicking on the tile/grid object the unit is on
- - - select multiple units:
- - - - - - if multiple units are selected, get their available grid positions they can each move to
- - - - - - check what movement grid positions the multiple units share, if any 
- - - - - - if there are shared movement grid positions, show those grid positions as possible "moves"
x Pathfinding to allow unit to move from one grid position to another
- Allow for obstacles/walls on the grid
- - x pathfinding to navigate around obstacles
- "Fog of war" on the grid - only reveal tiles within a certain range of player's units
- - - black for tiles that have not been navigated to or seen yet. Transparent grey for ones that have been but are no longer in view
- - - - - - "in view" modifiable by a "view distance" for each unit?

- How to calculate valid move when you have multiple units selected that are on different starting tiles
- - - calculate all possible move positions for each selected unit individually
- - - - - - if there are units starting from the same tile, and they have the same max move distance, just copy that move grid calculation
- - - - - - - - - to try and reduce repeat calculations and make this faster?
- - - - - - - - - maybe make a struct or something that's like:
							GridPosition startPosition
							int unitMoveDistance
							List<GridPosition> moveGridPositions
- - - - - - - - - - - - so when you check a unit, you see if the List of these structs has an entry with the same starting grid position and move distance as the unit you are checking. If not, make the move calculations. If yes, skip calculation
- - - - - - - - - - - - call it MovePositionStruct
- - - Find the "overlapping" tiles that all selected units have in their move grid positions
- - - - - - Loop through each selected unit/MovePositionStruct
- - - - - - - - - For the first iteration, save all the move positions to a list of "firstPositionMoves" / "commonMoves"
- - - - - - - - - For subsequent iterations:
- - - - - - - - - - - - Loop through all the commonMoves, check if they exist in the unit/MovePositionStruct being checked
- - - - - - - - - - - - - - - if the commonMove DOES NOT exist in the unit/MovePositionStruct's move list, REMOVE from commonMoves
- - - - - - - - - - - - - - - if the commonMove DOES exist in the unit/MovePositionStruct's move list, KEEP from commonMoves
- - - - - - - - - Grid positions that are left are the move positions that all selected units shared and can move to (I think)
- - - maybe relavent to performance? Fastest way to iterate over a List/Array in C# is: for loop with Length/Count cached in variable
- - - - - - for (int i = 0, n = collection.Count; i < n; i++) { /*...*/ }
- - - - - - https://www.reddit.com/r/dotnet/comments/ovscq7/performance_comparison_of_iteration_methods_over/
- precompute and cache grid neighbors when creating the path nodes?
- - - Add _neighborList to the pathnode class
- - - would need to remember to add neighbors if a new node became walkable or something? Like if players dug through wall
- - - - - - find neighbors for the new node
- - - - - - then go through each new neighbor, tell them to add the new node to their neighborList (unless the new node is already in the list)
- - - same for remembering to remove a neighbor if it became unblockable

### For hex grid stuff:
- Remember to set the cell size to 2x2
- - - For flat top, the grid's X and Y coordinates are flipped
- - - - - - So, if the grid position is X:4,Y:6 and you want to convert to world position:
- - - - - - - - - World position x = 6 * 2 * .75 = 9
- - - - - - - - - World Position y = 4 * 2 = 8
- - - - - - - - - when setting the tile on the tilemap then:
- - - - - - - - - - - - normal: _floorTileMap.SetTile(new Vector3Int(gridPosition.x, gridPosition.y, 0), _floorTile);
- - - - - - - - - - - - new for flat top: _floorTileMap.SetTile(new Vector3Int(gridPosition.y, gridPosition.x, 0), _floorTile);
- - - Pointed top is still normal X and Y in the grid space. Probably easier to just use that...

### isometric grid stuff:
https://www.youtube.com/playlist?list=PLaiY5ttc7bmd070CyEaCG0xBqecxZXk-d

### Pivot to make the game more of a tactics sort of stealth game
"Midnight Bomb Run"
- Goblins have evolved beyond the human need for bloodsheed to justify their conquests. All the great Goblin Nations agreed to (something about laser tag for combat)
- - - An elite group of sappers and engineers were chosen to infiltrate behind enemy lines and plant the gigaton laser bomb at the heart of the <x empire>. Misson Code Name: Midnight Bomb Run

### Wall Tiles
- Make the top of the walls one "flat" color so I don't need to make a million different tiles?
- - - should reduce it to ~8 different wall tiles, instead of the 20 I already have...
x create a "wall object" that is just a rectangle collider
- - x spawn them at wall tile position
- - x store in dictionary of position:wall object
- - - - - x to be used to find wall objects to remove if a wall tile is removed?
- - x create a "wall object holder" to make them all a child of


### Bowling Game:
- super bowling lane starts at 222px and narrows to 66 px : 3.36 to 1
- - - mine 128 to 70: 1.82 to one
- - - should be down to 38 on mine??? or start at 235
- Maybe use SNES resolution of 256x224?
- - - or just halve current resolution to 384x216? 320x180? 640x360?

### Change to a "freeze tag" game?
- when you shoot an enemy, you choose a body part to "freeze"
- - - Legs, Arms, Head
- - - Legs
- - - - - - shoot one leg max movement reduced by half
- - - - - - Freeze both, no movement allowed
- - - Arms
- - - - - - Shoot one arm shoot distance reduced by half 
- - - - - - Both, cannot shoot, throw grenades
- - - - - - OR
- - - - - - - - - one arm shot: double cost of all "arm" actions: Shooting, melee, throwing grenade, interacting with doors, etc...
- - - - - - - - - shoot both arms: all "arm" actions are disabled
- - - Head
- - - - - - This one maybe a bit "tricky," but...
- - - - - - shooting a unit's head fixes the characters "point of view"
- - - - - - - - - When a unit takes an action normally, their "head" turns toward the action in one of the eight directions
- - - - - - - - - - - - Up, Down, Left, Right - Up&Right, Down&Right, Down&Left, Up&Left
- - - - - - - - - - - - there will be a "cone of vision" to show where the unit is looking after their action
- - - - - - - - - When you shoot a unit in the head, the unit can no longer perform actions outside of their "cone"
- - - - - - - - - - - - so, if the unit is looking "up" when shot in the head, they could not then shoot at a target that is "down" from them
- - - - - - This might be a bit OP, so maybe make it so you have to hit the head twice for the effect, or shoot the body first then the head?
- You can unfreeze a teammate's body part by shooting them?
- for grenades: freeze one "body part" for every unit that is in the blast radius?
- - - if both legs are already frozen, freeze an arm. If both arms and legs are frozen, freeze head?
- - - can also be used to unfreeze teammates if you hit them


### Immediate Tasks:
x Have actions check if applicable body part is frozen
- - x if yes, affect actions for that task
- - x each action should have an associated body part?
x Display on action if it is "hindered" or affected by a half-frozen or frozen body part
- - x indicator to player when half frozen so they know that action will use all action points
- - x indicator to player when fully frozen to show why the action is not available
x Action to display an icon to show what body part affects them?
- - x scriptable object for "sprite mapping"
- - - - - x map a sprite for not frozen, half frozen, and full frozen
- - - - - x create scriptable object for each body part (head, arms, legs)
x Event when a body part's frozen state changes
- - x actions will update action point cost as needed?

### Longer term tasks
- When doing shoot action, prompt player to choose what body part to shoot before taking action
- Add in a "cover" system
- - - full cover if behind a wall or obstable that provides full coverage - can't hit that unit unless you flank them
- - - half cover if behind a shorter half wall/obstable - can only hit arms or head, not legs
- Change "defend" to "hunker down" or "take cover"
- - - allows for full cover if unit is behind wall/obstacle that only provides half cover
- - - removes unit vision past that wall though?
- Fog of war based on what units can "see"
- - - ties this into the "vision cone" that's affected by head statussasdsdsdfsadafdasdaadadasda

768x432