### Golf game notes/stuff to do

- Try and create two quick prototypes for just hitting a ball
- - - one based on Golf Story. top down 2d golfing
- - - - - - most of the ball movement isn't "seen" by the player. Really just ball moving in straight line based on where they aim
- - - - - x calculate "fake" arc of ball: height based on angle and so on
- - - - - - - - - for prototype, try to simply adjust the look of the ball based on its height. Smallest when on ground. Sprite gets bigger as it gets higher
- - - - - - - - - - - - have the ball script check its height value in update, change sprite as needed based on height hitting whatever threshholds
- - - - - x probably can't use the 2d physics engine, so you'd have to basically recreate it for the top down view?
- - - - - - - - - calculate trajectories manually. Detect collisions and then calculate the bounce/ricochet direction? Manually calculate bounces, etc.
- - - - - - - - - - - x more similar to how the football bounces are calculated in GRF? or something along those lines?
- - - - - - the "2d top-down hieght illusion" video maybe useful? https://www.youtube.com/watch?v=6iS0qbSbKuw and https://www.youtube.com/watch?v=aEMTc3rU2L8
- - - - - x use the z-axis as a psuedo height value that can be used to compare where objects are - as ball moves up, it's z value increases. As it moves down, it decreases. When it collides with something, compare Z values. If ball z value is lower than collision object's z value, there is a collision?
- - - - - - - - - doesn't seem like high z values affect whether the camera will render it in 2d? Only if Z gets too low. Otherwise, it is the Y value and order in layer that matters for things being rendered on top of each other or not
- - - - - x make it so you can putt into a hole
- - - - - x trail behind ball as it travels. Based on speed maybe?
- - - - - - - - x unfortunately the particles wigggle a lot...
- - - - - - - - x maybe switch to the trail renderer that turns on an offf? Adjust its width dynamically based on speed?
- - - - - x change spin to a Vector2 value so their is side spin as well as top/back spin?
- - - - - - - - x also need to have spin change trajectory somewhat. Top spin, lower angle and height but further distance? Back spin, higher angle and height and shorter distance?
- - - - - x controls to change the hit direction with left/right?
- - - - - x the power/accuracy bar thing and game for the hit power
- - - - - - - - x hit meter icon ranges: start at +8.5x end at -11.5x
- - - - - x scale ball size up by 1? The ground ball should be 4x4 not just 2x2? Basically, shift the ball size down and create one more "highester" ball
- - - - - - - - x can also change the "max height" / difference between ball sprite and shadow. Make it so the ball sprite can get higher than it currently can? The max difference now is like 5.25f
- - x Create objects in the game like trees that have specific "heights"
- - - - - x make a collider that is a Trigger at the base of the object - detect when balls shadow collides with the object when the ball is moving
- - - - - x if the balls zvalue is higher than the object's height, clear the object. If not, hit the object and bounce back
- - x Similar to the above but for the hole flag as well
- - - - - x depending on how high the ball is off the ground (it's z value) will determine if the ball bounces off the flag and into the hole?
- - - - - - - - x decided to just use the normal bounce-off-obstacle function and if the ball bounces into the hole, it counts. So special bounce scenario just for hole flags?
- - - - - - - - x should also check fall direction of the ball. If falling down, possible to bounce in. If still going up, have the ball bounce off the flag away from the hole
- - - When making the game, instead of copying the trees over and over with their own colliders, maybe make the collection of sprites, and then create one big collider that covers the whole area the trees are on?
- - - - - - would need to have the ball constantly check if it is "hitting" a tree/obstacle during its flight instead of just "OnTriggerEnter." CircleCast at each update/fixed update and check if it is over an obstacle and check height?
- - - - - - - - - needed because the balls height will change as it travels through its flight arc, getting higher/lower with each frame
- - - - - - - - - would likely need to do this anyway because the balls height will always change as it "goes over" a tree/obstacle. Could be especially important for bounces?
- - x when a rolling ball collides with the hole, check the ball's speed. If too fast, bounce past the hole. If slow enough, ball falls into the hole?
- - - have the camera focus/follow on the end of the hit trajectory
- - - - - x first should have the trajectory determine if the player will hit an object mid flight. If so, cut the trajectory short?
- - - - - x create a circle thing that shows the landing spot
- - - - - - exception for putting. When using the putter, player will want to see the "whole green" or whatever to determine hills/whatever to account for in their putts. Make sure the player can see the whole trajectory and not just the end
- - - - - x make it so the number of "line segments" for the trajectory is based on the distance traveled for the hit?
- - - - - - - - x longer shots have more points on the line to calculate, shorter shots have fewer
- - - - - - - - x maybe make it so there is a minimum of 10 points (or whatever) and a max of 100?
- - - - - x dashed line shader tutorial: https://www.youtube.com/watch?v=yEMM0sYCWoI
- - x wind: should shift the end target a certain amount based on a Vector2 direction and float for window power?
- - - - - x the drawn trajectory should NOT take wind into account
- - - - - - x draw a wind direction sprite
- - - other weather effects? Maybe have rain/snow? Lightning and stuff?
- - - - - x rain will reduce hitting power, dampen bounces off the ground, and slow down rolling faster? Rain could be something that slows down rolls, reduces bounces on the ground, and "dampens" your hit by lowering the actual max height it will achieve (relative to a "no rain" hit)
- - - - - - Lightning can maybe strike a player? Idk, some sort of mechanism to "take cover" which is a stroke penalty but you have a random chance to get struck by lightning that knocks you out for the hole so you get the max stroke penalty
- - - - - - Maybe have a tornado event where players have to do something to either avoid the tornado or make it less attracted to them? If you get hit by the tornado you lose a stroke and the ball gets launched in a random direction
- - - - - - - - - have be like some weird "wind god" ritual. Could be a rythym thing or some other little mini game and the player that does the worst (or random if they all do it perfectly) attracts the torndao toward them. The tornado moves greateer distances after each iteration of the wind god routine so bigger penalty for messing up later in the hole (or maybe make it a game long thing that transfers from hole to hole???)
- - - - - - - - - Reset the tornado after it hits a player so it can happen multiple times
- - - Events and delegates tutorial for wind power/direction changes: https://www.youtube.com/watch?v=6NRqwL3N5Go
- - x "Precision Mode" for the putter. Basically, have a long/short putt option. The short putt lowers the max distance so that the player has more control and can make shorter putts
- - - - - - maybe also have a "tap in" option if the ball is close enough to the hole. Player doesn't actually have to make the shot? Or maybe a very easy shot that has like a 1% chance of failing if the player really messes up their shot thing
- - - tilemap tutorial to use scriptable objects to store data at a per tile level? https://www.youtube.com/watch?v=XIqtZnqutGg
- - - - - - unique data in each tile: https://www.youtube.com/watch?v=nRFZDmThbdE
- - - - - - another tutorial on storing data in individual tiles: https://medium.com/@allencoded/unity-tilemaps-and-storing-individual-tile-data-8b95d87e9f32
- - - - - - scriptbale tiles https://www.youtube.com/watch?v=2FL0Jac5TAo
- - x when selecting the first club at the beginning of the player's turn, check which club has the max distance that is closest to the distance to the hole?
- - - - - x also have it set the hit distance to be at the hole if the club's distance is past the hole?
- - - Save a tilemap into a "level" or "hole" object so that it can be loaded by the game, then use that to build the saved tilemap for that hole?
- - - - - x maybe use Scriptable Objects for this?
- - - - - - - - x scriptable object would save things like: hole name, number, par amount, tile locations? Camera bounding box? out-of-bounds perimeter/bounds?
- - - - - - - - x tutorial for this? https://www.youtube.com/watch?v=TeEWLC-QKjw and https://www.youtube.com/watch?v=rveUkizSGE8
- - - - - - - - - - - - the first tutorial from tarodev mentions saving the "level" as a json object to then be read and rebuilt. Useful for players sharing maps. Should probably look into that more later when I want to have a "level editor" in the golf game?
- - - Dependency injection instead of singletons? https://medium.com/xrpractices/dependency-injection-in-unity-86afabf2cf8d and https://www.gamedeveloper.com/blogs/dependency-injection-on-unity-part-2-
- - - - - - service locator? https://medium.com/medialesson/simple-service-locator-for-your-unity-project-40e317aad307 and https://gameprogrammingpatterns.com/service-locator.html
- - - bounces bounce too far? Especially on fairways. Reduce bounce distance by like 40%? something like that?
- - - make a second patch of small rough ground after the lake for a second bounce?
- - - check when the landing target is out of bounds. When it is, either move it in closer (like when a player switches to a new club) or prevent the player from moving further out of the bounds ?
- - - For the aim points:
- - - - - - Get the distance to the hole. Then, check if any clubs that can hit on the current terrain have enough distance to reach the hole
- - - - - x or for now just have one "first aim point" that the player aims towards. After that, aim for the hole? Player checks if they are within 20 yards of the tee off position. If they are, aim for "first point," else aim for the hole?
- - x Add water logic:
- - - - - x if a player hits a ball in water, the ball will need to be placed outside of the water and the player takes a 1 stroke penalty
- - - - - - - - x cast ray from ball toward player, first point not in the water, set ball there?
- - - Add ability to view the "map" - zoomed out view of the course?
- - - - - x Will probably need disable the "Pixel Perfect Camera" and then on the virtual camera set the "ortho size" to something like 5x-8x the normal size
- - - - - - - - x Disable the "Cinemachine Pixel Perfect (Script)" component of the virtual camera
- - - - - - - - x Disable the "Camera Follow Script" of the virtual camera
- - - - - - - - x Set the "ortho size" to 9x it's current value
- - - - - - add controls for the player to pan around the course
- - - - - - - - - this will also require removing the "follow target" of the camera follow script so the camera isn't fixed
- - - - - - make sure to disable any controls that allow the player to hit the ball
- - - - - - - - - probably should start making some input manager controls for golf to be enabled/disabled like in GRF
- - - - - - - - - maybe still allow player to adjust their aim when viewing the map? at least in terms of left/right aiming?
- - - - - - reset everything after the player returns to game?
- - - Use "object pooling" to speed up clearing and loading a new hole?
- - - - - - https://learn.unity.com/tutorial/object-pooling#
- - - - - - https://www.youtube.com/watch?v=7EZ2F-TzHYw
- - x creating lightning and thunder flashes: https://www.youtube.com/watch?v=0NSz-ds4ets and https://www.youtube.com/watch?v=C5FmpgnBRFE
- - - - - x use a global light to light the scene. Lower the intensity depending on weather (1.0 for clear, 0.85 light rain, 0.75 med., 0.65 heavy rain, whatever)
- - - - - x have a spot light attached to the camera that turns on and off for lightning strikes
- - - - - - - - x intensity increases based on distance from player? no more than 1.5 for the lightning or it might get weird...
- - x "rain sounds" for light, med, heavy. Either different sounds for each or just one sounds and adjust its volume based on weather
- - - create "tornado" effect that spawns during storms and moves about
- - - - - x players try to "play around" the tornados. If their ball is hit by the tornado, thrown in random direction
- - - - - - "ritual" to be performed to either fend off the Wind God, or welcome their Judgement
- - - - - - - - - Whether or not tornadoes appear will be based on if more players welcome the judgement or not, based on minigame type thing, and also weighted based on how "well" either side does the pro/anti-wind god ritual
- - - - - - - - - Tornados also attracted to players that do the ritual worst?
x Icons that point to "special interest" objects that aren't on screen
- - x hole/flag
- - x tornados?
- - x text that also shows the distance to thos objects?
- - - too much of a hassle to do correctly...
- Fishnet multiplayer tutorial playlist: https://www.youtube.com/watch?v=oUPlKYlb27Y&list=PLF6lFlLzb6CSuf4g8ZR1VRq-TAgC6AQWD&index=2
- Another fishnet tutorial type thing. Particularly interested in how they set up their multiplayer/network manager. Look at the boardgame/fps posts
- - - https://winterboltgames.com/posts
- - - fishnet fundamentals: https://www.youtube.com/watch?v=5c1ie6Za5yg
- - - - - - 27:16
- fishnet with steam lobbies? https://www.youtube.com/watch?v=-Du_8_NZRWM
- Color picker in unity so player's can pick color of ball?
- - - https://www.youtube.com/watch?v=M6kEW6feh7g
- - - https://www.youtube.com/watch?v=sBkkeiZsx1s

x GameplayManager requirements for top down golf
- - x track what player's turn it is
- - x display current number of strokes for the player
- - - - - x grab this from a player's "score" object?
- - x when the ball stops moving, switch to the next player (furthest one away from hole?)
- - x hold list of holes to play in the course
- - x keep track of current hole, transition to the next hole correctly
x GameplayManager Next Steps
- - x Have GameplayManager set which player's turn it is. Tracked by GameplayManager and a bool value on the player for "player's turn" or whatever
- - - - - x after player hits ball, bool value for their turn is set to false
- - - - - x to start player's turn, have GameplayManager call StartPlayerTurn() from the GolfPlayerTopDown script?
- - x After a hit ball stops moving, GameplayManager checks for which player's turn is next
- - - - - - x if the "number of players who teed off) is less than length of list of players, go to the next player in list using _numberOfPlayersTeedOff as the index
- - - - - - x if _numberOfPlayersTeedOff is equal or greater than length of player list, calculate next player based on distance of their ball to the hole

### Power Up Tasks
x make sure that getting a second powerup removes the first power up, then adds the second
- hitboxes should be updated. It's a bit hard to hit them right now....
- - - might want to draw the balloons bigger?
- change the "PowerUpTypeMapping" thing in the PowerUpManagerTopDown script to be from a scriptable object instead?
- - - that way other objects, like the power ups and players, can just reference the one scriptable object instead of querying the powerupmanager? That might be better idk?
x replace the observerrpc in the powerupscript to set player's power up type with a similar function but in the player's script
x set the player's "HasPowerUp" and PowerUpType fields
- display in player's UI the powerup they have
- - x sprite for the power up displayed
- - x message sent to player with the "power up text" that says what it does
- - x have it as part of the "Hole Info Canvas" UI?
- - - - - x for each new player's turn, will need to retrieve new power up image?
- - x have a new Canvas on the player object, separate from the "player canvas"
- - - - - x checks at beginning of player's turn to see if it should turn on or not
- - - - - x make sure to set the power up message text to null before turning the canvas on at the beginning of the turn?
- - - - - - changed this to be on the gameplayermanager hole info UI instead
- if player has a power up, make sure they are alerted to it at the beginning of their turn that they can use it?
- - - arrow under the power up sprite that moves up and down to tell them it's there?
- - x message to player to press "p" key to use the power up
x have the player's used powerup be used/removed from them on the sever/ when they hit the ball?
- - x instead of right now where it's removed at the beginning of the next turn?
- - x I think this will be good because then a player can get a power up after their hit. So, use power up, hit ball, pop balloon, get new power up on same turn
- remember to reset the "player used power up this turn" bool and the UsedPowerUpType string at the end of the player's turn
- mulligan power up will be different
- - x prompt player for mulligan at end of their shot?
- - x make it so they have like 5 seconds to chose to mulligan? If they don't decide, end turn
- - - - - x p to use the mulligan, space or something else to end the turn?
- - - - - x space to skip mulligan and move onto next turn
- - - make sure that when a player uses a mulligan, lightning strikes and stuff still function? maybe?
- - x maybe don't do the "prompt for mulligan" stuff from GameplayManager's "StartNextPlayersTurn" and instead just have the player get prompted when their ball comes to a stop? aka before StartNextPlayersTurn is ever called make the check to see if a player has a mulligan?
- - - - - x wasn't working so did it from gameplaymanager like before
- - x Need to test what happens with lightning during a storm. See what happens when a player mulligans and is then struck by lightning
- - - - - x seems to resume the turn order stuff after lightning strike? Just had to make sure to set the PlayeRMulligan value back to false if it was true
- - - - - - still need to test what happens if player has a mulligan that they HAVE NOT used yet, and is then struck by lightning. Are they prompted for their mulligan (they shouldn't be)
x If they use rain/wind powerup
- - x send message to server. Set the player rain to clear/wind to 0. The player's shot should then not take those into account when doing their shot
- - - - - x and hopefully won't cause lightning/tornadoes to be affected because it isn't affecting the base weather/wind?
x for power/accuracy power ups
- - x set modifier for power/accuracy on the server in a syncvar
- - x when shots are calculated, the modifier is used by the client to calculate distance/accuracy
- - x for distance, make sure to update a new trajectory for the player so their max distance is shown right away? otherwise, they'd have to change their club to update it?
- maybe make power ups more ridiculous and value
- - - keep distance and accuracy, but it make it so it's perfect accuracy and distance is like +50%
- - - have things like rocket ball that you can aim (that will be hard...)
- - - - - - if player runs into obstacle whil using the rocket engine, blow the player up - but only if the rocket is on. if they stopped, they just bounce
- - - - - - what to do if hit by tornado? tornado launches ball in random direction. Maybe make it so the rocket just stops? Have a bool on the player object like "canUseRocketPower" and set it to false when a tornado hits it?
- - - - - - change the color of the trail renderer from purple to orange and grey to look like fire and smoke from a rocket?
- - x drill ball goes through obstacles
- - - one that pushes nearby balls away from you (may be over powered on greens...)
- - x for rain/wind - make it so player that uses it has always clear weather / no wind. Every other player gets 1 turn with weather one worse than the base, and wind that is +5 stronger than base?
- - - - - x set an effect on the managers when it is used. Manager gets a list of all players in the game, minus the player that used the power up. Each new turn, track current player. If they are on the list, take the power up effect and then remove from list. If not, calculate weather normally. Keep checking until list is empty
- visual indicator that a power is used
- - - text that pops up with the power up text?
- - - change the "press p" text to say press p again to cancel power up use? will need to add that functionality....

ballon heights
2.75
4.5625
3.75
5.5625
4.75
6.5625

### Misc. Tasks
- ball sprite currently goes "behind" the statues and power up ball/crate sprites. Need to do the sprite mask thing I did for trees?
- Have the player that tees off first at the start of the game be determined by a "shot challenge"
- - - Hole/flag set ~100 meters away from players
- - - can only use the iron
- - - each player gets 1 shot
- - - random weather and wind? But always SOME wind to account for
- - - maybe have a bunch of different "challenge holes" that are configured slightly differently. Game picks random between them for the new game?
- - - - - - or have some way to dynamically generate the hole and send that info to all palyers
- - - after each player takes 1 shot, calculate their distance from the hole
- - - - - - closest goes first, farthest away goes last
- - - - - - if tied, such as multiple holes in one, choose randomly who will go first?
x tornadoes target player with lowest favor, which could be a player that is struck by lightning. Need to make sure to skip those players...
- - - tornado was using the GolfPlayersServer list to get its targets. Changed it to just GolfPlayers, since a player is removed from GolfPlayers when they are struck by lightning.
- If a player hits a ball out of bounds or in water, Player Favor is calculated BEFORE the ball is moved. Change to afterward?




- - - other based on Cursed to Golf. Side view, 2d golf platforming
- - - - - - this will likely be easier?
- - - - - - can only hit the ball either right or left
- - - - - - calculate arc of ball based on power and angle
- - - - - - ball bounces off the ground? loses momentum with each bounce?
- - - - - - use unity physics engine for all the ball movement?
- - - - - - draw trajectory line: https://www.youtube.com/watch?v=13KrnisMf14 or https://www.youtube.com/watch?v=p8e4Kpl9b28
- - - - - - - - - 2d trajectory line: https://www.youtube.com/watch?v=RpeRnlLgmv8

### Golf average numbers for different clubs for: distance, launch angle, height, etc.
https://www.globalgolf.com/articles/pro-tip-61/

34, -1, 0




GolfEnvironmentObstacles

x Deactivate player sprite if it is not their turn. Reactivate when their turn starts aka when they become CurrentPlayer
- - x Recenter the camera on the player's ball/player sprite when they become the Current player
- - x Maybe have a slight delay when about to change turns to new player so the camera doesn't immediately change before the player who hits can see where their ball settled
- - - - - x this was already being done with the "tell player the ground type they are on" function...


distance calculator
https://www.calculatorsoup.com/calculators/geometry-plane/distance-two-points.php