### Golf game notes/stuff to do

- Try and create two quick prototypes for just hitting a ball
- - - one based on Golf Story. top down 2d golfing
- - - - - - most of the ball movement isn't "seen" by the player. Really just ball moving in straight line based on where they aim
- - - - - x calculate "fake" arc of ball: height based on angle and so on
- - - - - - - - - for prototype, try to simply adjust the look of the ball based on its height. Smallest when on ground. Sprite gets bigger as it gets higher
- - - - - - - - - - - - have the ball script check its height value in update, change sprite as needed based on height hitting whatever threshholds
- - - - - x probably can't use the 2d physics engine, so you'd have to basically recreate it for the top down view?
- - - - - - - - - calculate trajectories manually. Detect collisions and then calculate the bounce/ricochet direction? Manually calculate bounces, etc.
- - - - - - - - - - - x more similar to how the football bounces are calculated in GRF? or something along those lines?
- - - - - - the "2d top-down hieght illusion" video maybe useful? https://www.youtube.com/watch?v=6iS0qbSbKuw and https://www.youtube.com/watch?v=aEMTc3rU2L8
- - - - - x use the z-axis as a psuedo height value that can be used to compare where objects are - as ball moves up, it's z value increases. As it moves down, it decreases. When it collides with something, compare Z values. If ball z value is lower than collision object's z value, there is a collision?
- - - - - - - - - doesn't seem like high z values affect whether the camera will render it in 2d? Only if Z gets too low. Otherwise, it is the Y value and order in layer that matters for things being rendered on top of each other or not
- - - - - x make it so you can putt into a hole
- - - - - x trail behind ball as it travels. Based on speed maybe?
- - - - - - - - x unfortunately the particles wigggle a lot...
- - - - - - - - x maybe switch to the trail renderer that turns on an offf? Adjust its width dynamically based on speed?
- - - - - x change spin to a Vector2 value so their is side spin as well as top/back spin?
- - - - - - - - x also need to have spin change trajectory somewhat. Top spin, lower angle and height but further distance? Back spin, higher angle and height and shorter distance?
- - - - - x controls to change the hit direction with left/right?
- - - - - x the power/accuracy bar thing and game for the hit power
- - - - - - - - x hit meter icon ranges: start at +8.5x end at -11.5x
- - - - - x scale ball size up by 1? The ground ball should be 4x4 not just 2x2? Basically, shift the ball size down and create one more "highester" ball
- - - - - - - - x can also change the "max height" / difference between ball sprite and shadow. Make it so the ball sprite can get higher than it currently can? The max difference now is like 5.25f
- - x Create objects in the game like trees that have specific "heights"
- - - - - x make a collider that is a Trigger at the base of the object - detect when balls shadow collides with the object when the ball is moving
- - - - - x if the balls zvalue is higher than the object's height, clear the object. If not, hit the object and bounce back
- - x Similar to the above but for the hole flag as well
- - - - - x depending on how high the ball is off the ground (it's z value) will determine if the ball bounces off the flag and into the hole?
- - - - - - - - x decided to just use the normal bounce-off-obstacle function and if the ball bounces into the hole, it counts. So special bounce scenario just for hole flags?
- - - - - - - - x should also check fall direction of the ball. If falling down, possible to bounce in. If still going up, have the ball bounce off the flag away from the hole
- - - When making the game, instead of copying the trees over and over with their own colliders, maybe make the collection of sprites, and then create one big collider that covers the whole area the trees are on?
- - - - - - would need to have the ball constantly check if it is "hitting" a tree/obstacle during its flight instead of just "OnTriggerEnter." CircleCast at each update/fixed update and check if it is over an obstacle and check height?
- - - - - - - - - needed because the balls height will change as it travels through its flight arc, getting higher/lower with each frame
- - - - - - - - - would likely need to do this anyway because the balls height will always change as it "goes over" a tree/obstacle. Could be especially important for bounces?
- - x when a rolling ball collides with the hole, check the ball's speed. If too fast, bounce past the hole. If slow enough, ball falls into the hole?
- - - have the camera focus/follow on the end of the hit trajectory
- - - - - x first should have the trajectory determine if the player will hit an object mid flight. If so, cut the trajectory short?
- - - - - x create a circle thing that shows the landing spot
- - - - - - exception for putting. When using the putter, player will want to see the "whole green" or whatever to determine hills/whatever to account for in their putts. Make sure the player can see the whole trajectory and not just the end
- - - - - x make it so the number of "line segments" for the trajectory is based on the distance traveled for the hit?
- - - - - - - - x longer shots have more points on the line to calculate, shorter shots have fewer
- - - - - - - - x maybe make it so there is a minimum of 10 points (or whatever) and a max of 100?
- - - - - x dashed line shader tutorial: https://www.youtube.com/watch?v=yEMM0sYCWoI
- - x wind: should shift the end target a certain amount based on a Vector2 direction and float for window power?
- - - - - x the drawn trajectory should NOT take wind into account
- - - - - - x draw a wind direction sprite
- - - other weather effects? Maybe have rain/snow? Lightning and stuff?
- - - - - x rain will reduce hitting power, dampen bounces off the ground, and slow down rolling faster? Rain could be something that slows down rolls, reduces bounces on the ground, and "dampens" your hit by lowering the actual max height it will achieve (relative to a "no rain" hit)
- - - - - - Lightning can maybe strike a player? Idk, some sort of mechanism to "take cover" which is a stroke penalty but you have a random chance to get struck by lightning that knocks you out for the hole so you get the max stroke penalty
- - - - - - Maybe have a tornado event where players have to do something to either avoid the tornado or make it less attracted to them? If you get hit by the tornado you lose a stroke and the ball gets launched in a random direction
- - - - - - - - - have be like some weird "wind god" ritual. Could be a rythym thing or some other little mini game and the player that does the worst (or random if they all do it perfectly) attracts the torndao toward them. The tornado moves greateer distances after each iteration of the wind god routine so bigger penalty for messing up later in the hole (or maybe make it a game long thing that transfers from hole to hole???)
- - - - - - - - - Reset the tornado after it hits a player so it can happen multiple times
- - - Events and delegates tutorial for wind power/direction changes: https://www.youtube.com/watch?v=6NRqwL3N5Go
- - x "Precision Mode" for the putter. Basically, have a long/short putt option. The short putt lowers the max distance so that the player has more control and can make shorter putts
- - - - - - maybe also have a "tap in" option if the ball is close enough to the hole. Player doesn't actually have to make the shot? Or maybe a very easy shot that has like a 1% chance of failing if the player really messes up their shot thing
- - - tilemap tutorial to use scriptable objects to store data at a per tile level? https://www.youtube.com/watch?v=XIqtZnqutGg
- - - - - - unique data in each tile: https://www.youtube.com/watch?v=nRFZDmThbdE
- - - - - - another tutorial on storing data in individual tiles: https://medium.com/@allencoded/unity-tilemaps-and-storing-individual-tile-data-8b95d87e9f32
- - - - - - scriptbale tiles https://www.youtube.com/watch?v=2FL0Jac5TAo
- - x when selecting the first club at the beginning of the player's turn, check which club has the max distance that is closest to the distance to the hole?
- - - - - x also have it set the hit distance to be at the hole if the club's distance is past the hole?
- - - Save a tilemap into a "level" or "hole" object so that it can be loaded by the game, then use that to build the saved tilemap for that hole?
- - - - - x maybe use Scriptable Objects for this?
- - - - - - - - x scriptable object would save things like: hole name, number, par amount, tile locations? Camera bounding box? out-of-bounds perimeter/bounds?
- - - - - - - - x tutorial for this? https://www.youtube.com/watch?v=TeEWLC-QKjw and https://www.youtube.com/watch?v=rveUkizSGE8
- - - - - - - - - - - - the first tutorial from tarodev mentions saving the "level" as a json object to then be read and rebuilt. Useful for players sharing maps. Should probably look into that more later when I want to have a "level editor" in the golf game?
- - - Dependency injection instead of singletons? https://medium.com/xrpractices/dependency-injection-in-unity-86afabf2cf8d and https://www.gamedeveloper.com/blogs/dependency-injection-on-unity-part-2-
- - - - - - service locator? https://medium.com/medialesson/simple-service-locator-for-your-unity-project-40e317aad307 and https://gameprogrammingpatterns.com/service-locator.html
- - - bounces bounce too far? Especially on fairways. Reduce bounce distance by like 40%? something like that?
- - - make a second patch of small rough ground after the lake for a second bounce?
- - - check when the landing target is out of bounds. When it is, either move it in closer (like when a player switches to a new club) or prevent the player from moving further out of the bounds ?
- - - For the aim points:
- - - - - - Get the distance to the hole. Then, check if any clubs that can hit on the current terrain have enough distance to reach the hole
- - - - - x or for now just have one "first aim point" that the player aims towards. After that, aim for the hole? Player checks if they are within 20 yards of the tee off position. If they are, aim for "first point," else aim for the hole?
- - x Add water logic:
- - - - - x if a player hits a ball in water, the ball will need to be placed outside of the water and the player takes a 1 stroke penalty
- - - - - - - - x cast ray from ball toward player, first point not in the water, set ball there?
- - - Add ability to view the "map" - zoomed out view of the course?
- - - - - x Will probably need disable the "Pixel Perfect Camera" and then on the virtual camera set the "ortho size" to something like 5x-8x the normal size
- - - - - - - - x Disable the "Cinemachine Pixel Perfect (Script)" component of the virtual camera
- - - - - - - - x Disable the "Camera Follow Script" of the virtual camera
- - - - - - - - x Set the "ortho size" to 9x it's current value
- - - - - - add controls for the player to pan around the course
- - - - - - - - - this will also require removing the "follow target" of the camera follow script so the camera isn't fixed
- - - - - - make sure to disable any controls that allow the player to hit the ball
- - - - - - - - - probably should start making some input manager controls for golf to be enabled/disabled like in GRF
- - - - - - - - - maybe still allow player to adjust their aim when viewing the map? at least in terms of left/right aiming?
- - - - - - reset everything after the player returns to game?
- - - Use "object pooling" to speed up clearing and loading a new hole?
- - - - - - https://learn.unity.com/tutorial/object-pooling#
- - - - - - https://www.youtube.com/watch?v=7EZ2F-TzHYw
- - x creating lightning and thunder flashes: https://www.youtube.com/watch?v=0NSz-ds4ets and https://www.youtube.com/watch?v=C5FmpgnBRFE
- - - - - x use a global light to light the scene. Lower the intensity depending on weather (1.0 for clear, 0.85 light rain, 0.75 med., 0.65 heavy rain, whatever)
- - - - - x have a spot light attached to the camera that turns on and off for lightning strikes
- - - - - - - - x intensity increases based on distance from player? no more than 1.5 for the lightning or it might get weird...
- - x "rain sounds" for light, med, heavy. Either different sounds for each or just one sounds and adjust its volume based on weather
- - - create "tornado" effect that spawns during storms and moves about
- - - - - x players try to "play around" the tornados. If their ball is hit by the tornado, thrown in random direction
- - - - - - "ritual" to be performed to either fend off the Wind God, or welcome their Judgement
- - - - - - - - - Whether or not tornadoes appear will be based on if more players welcome the judgement or not, based on minigame type thing, and also weighted based on how "well" either side does the pro/anti-wind god ritual
- - - - - - - - - Tornados also attracted to players that do the ritual worst?
x Icons that point to "special interest" objects that aren't on screen
- - x hole/flag
- - x tornados?
- - x text that also shows the distance to thos objects?
- - - too much of a hassle to do correctly...
- Fishnet multiplayer tutorial playlist: https://www.youtube.com/watch?v=oUPlKYlb27Y&list=PLF6lFlLzb6CSuf4g8ZR1VRq-TAgC6AQWD&index=2
- Another fishnet tutorial type thing. Particularly interested in how they set up their multiplayer/network manager. Look at the boardgame/fps posts
- - - https://winterboltgames.com/posts
- - - fishnet fundamentals: https://www.youtube.com/watch?v=5c1ie6Za5yg
- - - - - - 27:16
- fishnet with steam lobbies? https://www.youtube.com/watch?v=-Du_8_NZRWM
- Color picker in unity so player's can pick color of ball?
- - - https://www.youtube.com/watch?v=M6kEW6feh7g
- - - https://www.youtube.com/watch?v=sBkkeiZsx1s

x GameplayManager requirements for top down golf
- - x track what player's turn it is
- - x display current number of strokes for the player
- - - - - x grab this from a player's "score" object?
- - x when the ball stops moving, switch to the next player (furthest one away from hole?)
- - x hold list of holes to play in the course
- - x keep track of current hole, transition to the next hole correctly
x GameplayManager Next Steps
- - x Have GameplayManager set which player's turn it is. Tracked by GameplayManager and a bool value on the player for "player's turn" or whatever
- - - - - x after player hits ball, bool value for their turn is set to false
- - - - - x to start player's turn, have GameplayManager call StartPlayerTurn() from the GolfPlayerTopDown script?
- - x After a hit ball stops moving, GameplayManager checks for which player's turn is next
- - - - - - x if the "number of players who teed off) is less than length of list of players, go to the next player in list using _numberOfPlayersTeedOff as the index
- - - - - - x if _numberOfPlayersTeedOff is equal or greater than length of player list, calculate next player based on distance of their ball to the hole

### Power Up Tasks
x make sure that getting a second powerup removes the first power up, then adds the second
- hitboxes should be updated. It's a bit hard to hit them right now....
- - - might want to draw the balloons bigger?
- change the "PowerUpTypeMapping" thing in the PowerUpManagerTopDown script to be from a scriptable object instead?
- - - that way other objects, like the power ups and players, can just reference the one scriptable object instead of querying the powerupmanager? That might be better idk?
x replace the observerrpc in the powerupscript to set player's power up type with a similar function but in the player's script
x set the player's "HasPowerUp" and PowerUpType fields
- display in player's UI the powerup they have
- - x sprite for the power up displayed
- - x message sent to player with the "power up text" that says what it does
- - x have it as part of the "Hole Info Canvas" UI?
- - - - - x for each new player's turn, will need to retrieve new power up image?
- - x have a new Canvas on the player object, separate from the "player canvas"
- - - - - x checks at beginning of player's turn to see if it should turn on or not
- - - - - x make sure to set the power up message text to null before turning the canvas on at the beginning of the turn?
- - - - - - changed this to be on the gameplayermanager hole info UI instead
- if player has a power up, make sure they are alerted to it at the beginning of their turn that they can use it?
- - - arrow under the power up sprite that moves up and down to tell them it's there?
- - x message to player to press "p" key to use the power up
x have the player's used powerup be used/removed from them on the sever/ when they hit the ball?
- - x instead of right now where it's removed at the beginning of the next turn?
- - x I think this will be good because then a player can get a power up after their hit. So, use power up, hit ball, pop balloon, get new power up on same turn
- remember to reset the "player used power up this turn" bool and the UsedPowerUpType string at the end of the player's turn
- mulligan power up will be different
- - x prompt player for mulligan at end of their shot?
- - x make it so they have like 5 seconds to chose to mulligan? If they don't decide, end turn
- - - - - x p to use the mulligan, space or something else to end the turn?
- - - - - x space to skip mulligan and move onto next turn
- - - make sure that when a player uses a mulligan, lightning strikes and stuff still function? maybe?
- - x maybe don't do the "prompt for mulligan" stuff from GameplayManager's "StartNextPlayersTurn" and instead just have the player get prompted when their ball comes to a stop? aka before StartNextPlayersTurn is ever called make the check to see if a player has a mulligan?
- - - - - x wasn't working so did it from gameplaymanager like before
- - x Need to test what happens with lightning during a storm. See what happens when a player mulligans and is then struck by lightning
- - - - - x seems to resume the turn order stuff after lightning strike? Just had to make sure to set the PlayeRMulligan value back to false if it was true
- - - - - - still need to test what happens if player has a mulligan that they HAVE NOT used yet, and is then struck by lightning. Are they prompted for their mulligan (they shouldn't be)
x If they use rain/wind powerup
- - x send message to server. Set the player rain to clear/wind to 0. The player's shot should then not take those into account when doing their shot
- - - - - x and hopefully won't cause lightning/tornadoes to be affected because it isn't affecting the base weather/wind?
x for power/accuracy power ups
- - x set modifier for power/accuracy on the server in a syncvar
- - x when shots are calculated, the modifier is used by the client to calculate distance/accuracy
- - x for distance, make sure to update a new trajectory for the player so their max distance is shown right away? otherwise, they'd have to change their club to update it?
- maybe make power ups more ridiculous and value
- - - keep distance and accuracy, but it make it so it's perfect accuracy and distance is like +50%
- - - have things like rocket ball that you can aim (that will be hard...)
- - - - - - if player runs into obstacle whil using the rocket engine, blow the player up - but only if the rocket is on. if they stopped, they just bounce
- - - - - - what to do if hit by tornado? tornado launches ball in random direction. Maybe make it so the rocket just stops? Have a bool on the player object like "canUseRocketPower" and set it to false when a tornado hits it?
- - - - - - change the color of the trail renderer from purple to orange and grey to look like fire and smoke from a rocket?
- - x drill ball goes through obstacles
- - - one that pushes nearby balls away from you (may be over powered on greens...)
- - x for rain/wind - make it so player that uses it has always clear weather / no wind. Every other player gets 1 turn with weather one worse than the base, and wind that is +5 stronger than base?
- - - - - x set an effect on the managers when it is used. Manager gets a list of all players in the game, minus the player that used the power up. Each new turn, track current player. If they are on the list, take the power up effect and then remove from list. If not, calculate weather normally. Keep checking until list is empty
- visual indicator that a power is used
- - - text that pops up with the power up text?
- - - change the "press p" text to say press p again to cancel power up use? will need to add that functionality....

ballon heights
2.75
4.5625
3.75
5.5625
4.75
6.5625

### Misc. Tasks
- ball sprite currently goes "behind" the statues and power up ball/crate sprites. Need to do the sprite mask thing I did for trees?
- Have the player that tees off first at the start of the game be determined by a "shot challenge"
- - - Hole/flag set ~100 meters away from players
- - - can only use the iron
- - - each player gets 1 shot
- - - random weather and wind? But always SOME wind to account for
- - - maybe have a bunch of different "challenge holes" that are configured slightly differently. Game picks random between them for the new game?
- - - - - - or have some way to dynamically generate the hole and send that info to all palyers
- - - after each player takes 1 shot, calculate their distance from the hole
- - - - - - closest goes first, farthest away goes last
- - - - - - if tied, such as multiple holes in one, choose randomly who will go first?
x tornadoes target player with lowest favor, which could be a player that is struck by lightning. Need to make sure to skip those players...
- - x tornado was using the GolfPlayersServer list to get its targets. Changed it to just GolfPlayers, since a player is removed from GolfPlayers when they are struck by lightning.
x If a player hits a ball out of bounds or in water, Player Favor is calculated BEFORE the ball is moved. Change to afterward?
- If there is a lightning storm occuring, and player's get server average favor high enough to make base weather clear, a lightning strike still occurs
- - - double check when the player is prompted for lightning, and when the average player favor is calculated
- - - - - - make sure average is calculated before the prompt for lightning
- - - - - - if average favor will set weather to clear, don't rely on the BaseWeather event to stop the lightning storm. Make call to Lightning manager to turn off IsThereLightning (orwhatever its called)
- - x I don't think this is an actual issue right now. One thing I do need to change, though, is that if a player's rainstate is clear, they shouldn't be prompted for lightning or see a flash. Just don't send that info but keep the IsThereLightning bool to true
- The "start next turn" process should really be re-written I think? Right now, it's a bit of a mess with so many different weird things going through it. Should try and separate it out a bit I think?
x The "no bounce" power up seemed to fail on me. Ball didn't bounce, but it did keep rolling. Had side spin on an iron club that landed in rough
- - x working now, but test "no bounce" when landing on a hill. Will the ball roll at the start of next turn? - tested and it seems to work fine
x make it so that a lightning storm can only "start" once per hole?
- - x distance is calculated by severity - same as before
- - x if the storm disappears on its own, no more lightning that round. If it disappears because someone broke a good weather statue, no more lightning!


# Post playtest things to fix:
x fewer bad weather statues, more good weather statues
- - x specifically remove bad weather statues on the greens. Too many bad weather statues there. Should only have one in a location that players would get to if they try and bomb a shot to the hole and miss
x remove "feature" where bad weather statues have larger radiuses than good weather statues
x "health" for statues
- - x currently ball has to hit statue at 5 m/s to break statue
- - x change it so statue has 5 total health, and each hit the ball does damage equal to its speed
- - x so now statue will break after 5 "damage." aka player 1 hits statue first at 2 m/s, doesn't break. Player 2 hits statue second at 3 m/s, statue breaks
x breaking statue has global weather effects and not just the favor boost:
- - x good weather - immediately dispels any lightning storms and tornadoes. Clear weather for next 5 turns?
- - x bad weather -  immediately starts a lightning storm or spawns a tornado. tornado targets that player who broke the statue?
- - - - - x just going to have bad weather statue = tornado. No additional storms. too much...
x fix tornado spawning so they don't always spawn in bad weather
x make it so tornado selects target on spawn, then despawns when it hits it's target.
- - x then have a turn cooldown after it despawns? or just one tornado per hole?
- - - currently have it set to only spawn once per hole. May want to change so it spawns on events:
- - - - - x player breaks bad weather statue -> spawn tornado that targets that player
- - - - - - player gets below specific treshhold - say -5 favor - spawn tornado that targets them?
x make power ups easier to hit
- - x have a second collider for the box? Not sure if I can have two colliders... worth a shot though
- - - - - x Second collider would be smaller and only effect if player hit the box
- - - - - x animation of box falling off balloon and balloon flying away upward?
x more powerups on a hole?
x fix it so when a tornado throws you, it doesn't recalculate bad weather favor
- - x when a ball is hit by a tornado, check to see if the ball has IsHit/IsBouncing/IsRolling set to true. If not, mark the ball as "HitByTornado" or something similar
- - x then, when going to calculate favor for the ball, if "HitByTornado" is true, don't calculate favor. Only do so if it is not true
- - x remember to reset the HitByTornado value after the ball is done being "hit" by the tornado
- The Rick Lightning issue:
- - - rick was struck but lightning, but still hit ball
- - - pretty sure this is caused by playing being struck by lightning being calculated on the server, and the ball hit being on the client
- - - - - - server tells player they were struck by lightning, but network latency is too high and the player doesn't get the struck by lightning message until after they hit the ball
- - - when there is lightning, make sure the player doesn't hit the ball unless the server says they can?
- - - change the lightning strike process:
- - - - - - currently player will start normal swing animation. When their swing gets to the top, they tell server to calculate lightning strike. Server sets a syncvar. If the syncvar is true, they stop the swing animation and start the lightning strike animation
- - - - - x change it so before the player does any swing animation or ball hit, they ask the server if they can hit normally or not
- - - - - x server calculates lightning strike then. If they are struck, tells player to play the "struck by lightning" animation. If they are not struck, server tells them to play the normal hit animation and hit normally
- - - - - x player will have two hit animations: normal hit, lightning strike "hit"
- - - - - - - - x the lightning strike hit will have the flashes/skeleton, which call function to make the light flash
- - - - - - - - x will also have the disintergration animation that then calls function to prompt user about being struck
x new lightning strike:
- - x make sure to call StruckByLightning() so that PlayerStruckByLightning gets set to true

# to complete before "release"
x the sprite collision stuff for statues and power ups so the ball isn't always "behind" them when the ball should be rendered in front
- - x the balloon powerups will need to do this somewhat dynamically. A sprite needs to be provided for the sprite mask. The sprite to use will change depending on if it is a low/med/high balloon
- - - - - x will also need to adjust the sprite collision collider based on balloon height. Have a script change the "offset" of a collider?
- use the input system instead of the ad-hoc, hardcoded inputs detected in update
- - - make input schemes/maps/whatever they're called for each "phase" - aiming/chosing club and all that, the hit meter, and so on
- tee off challenge to see who hits first?
- - x hole 75~ feet away
- - x random wind and direction , between say 3 - 12 mph
- - x always clear weather and no lightning/tornadoes
- - x display to player their distance
- - x make a new scriptable hole for "tee off challenge" or whatever
- - - - - x gameplay manager will just load it before the first real hole of the course
- - - gameplay manager will have a "game state" or similar value
- - - - - - right now it will just be "tee off challenge" and "course-holes" or something
- - - - - x the "SetNextPlayer" super function can just have a check for that bool and send the next turn logic to a new function just for that
- - - - - - - - - this is just to make it so all the stuff feeding into SetNextPlayer can be re-used?
- - x maybe make it so whoever wins starts with +1 favor? (or ties for the win?)
- - - make at least two different "challenges." One is the tee off challenge, the other is a putting challenge? The putting one having a lot of weid direction tile changes, and maybe things to bounce off of? like mini golf...
- - - consolidate some of "NextHole"'s and "StartFirstHole"'s function calls to be in one function that they both call. Don't need them to call same functions from different areas, and the "start tee off challenge" function will need to call them too?
- integrate into GRF? Convert GRF to fishnet, or convert golf to mirror? Or leave separate
- - - ideally the "join game" menu will show both GRF and Golf games
- "map maker" - optional
- convert a lot of functionality on the gameplaymanager, player, and ball to "state machines" so there isn't a million bools and stuff?
- - x https://www.youtube.com/watch?v=Vt8aZDPzRjI&t=1s
- - - - - - refactoring for hierarchical state machine: https://www.youtube.com/watch?v=kV06GiJgFhc
- - - - - - more state machine stuff from the same guy? https://www.youtube.com/watch?v=amSzqkMEcbU&t=35s
- - - - - - command pattern related to state? https://www.youtube.com/watch?v=oLRINAn0cuw&t=27s
- - - https://www.youtube.com/watch?v=RQd44qSaqww
- - - - - - logic in scriptable objects to support state machines? https://www.youtube.com/watch?v=iOYo7flBUW4
- - - https://www.youtube.com/watch?v=zGEtN4nXIYQ (dapper dino)
- - - https://www.youtube.com/watch?v=4Lom_lqSGoY
- - - https://www.youtube.com/watch?v=5PTd0WdKB-4
- - - https://www.youtube.com/watch?v=4k16sSm4tZA (inheritance and interfaces)
- - - environment obstacles may be a good target for this. Different types of obstacles: trees, statues, holes, etc. Each should have different functionality that a base class passes to? for how to respond to collisions
- - - - - - and some obstacles, like statues, change the "type" of obstacle they are when they are broken, making this state machine with interfaces and stuff make sense for them?
x spinning hoop targets
- - x if a player hits their ball through a hoop, they get -1 stroke (that's a good thing)
- - x off the beaten path of the course so they have to hook their shots into it?
- - x spinning to make it look more realistic to hit "through" from any angle
- - x collision detector on the ground, as normal. When the ball's shadow hits that collider:
- - - - - x check to see if the ball sprite collider is overlapping the spinning hoop collider. If yes, ball passed through hoop
- - - - - x have to check constantly through OnTriggerStay? Or have a second check on the spritecollision: check if the shadow is in the in the base collider when the sprites collide? If so, do the -1 stroke thing
- - - - - - - x will need to make sure it isn't done twice, though
- - - - - x have base collider be a circle as well as the hoop sprite collider?
- mario pipe/tunnel things
- - x small pipes on the course. If a player hits their ball into it, they go through the tunnel and out the other side
- - x end pipe will be near the hole. Plops the player near the hole
- - x put the pipes in non-ideal locations. If a player misses it, they're kind of stuck?
- - x multiple pipes per hole: make them color coded? or multiple entries and one exit?
- - x should be somewhat of a challenge. The player has to "pong" the ball" in, and if they miss, they bounce off the rim?
- - x tubes "A" and "B" that have to be paired
- - - - - x tile map manager checks to make sure there are at least two tubes before saving. If not, don't save the tubes
- - - - - x when the tubes are spawned:
- - - - - - - - x spawn tube A, then tube B
- - - - - - - - x make sure each tube has a reference to the other tube, it's "pair" that it sends the ball too
- - - when a ball bounces off the top of a tube/obstacle, maybe give it some extra "juice"/distance to the bounce? Right now, seems easy to get stuck bouncing off the top continuously
- - - - - - possible that is caused by the spin I'm putting on the ball while testing also. Still, maybe make it bounce further off the top of objects? couldn't hurt?
x Rock power up
- - x leave behind a small rock obstacle after you hit. Idea is to do it on putting green to block other players' shots
- - x would need to make sure that it can't completely block a hole. collision check where it is placed?
- - - - x when it spawns, check distance to the nearest hole. If the distance is within a certain threshold to the hole move the object
- - - - - - - - x get direction from object to hole
- - - - - - - - x have a "minimum distance" from the hole value
- - - - - - - - x move the object in the opposite direction from it and the hole that will be at least the "minimum distance" away from the hole
- - - - - - - - - Find equation to find point given distance, direction, and starting point (the hole)? Shouldn't be that hard?
- - - - - - - - x make sure not to place the rock until after the players hit?
- - - - - - - - x also make sure that if the spawned object is "on top" of a ball, that ball gets moved?
- other powerups that a player "Drops"
- - - Tree that can be a blocker on fairways and stuff
- - - a bomb: player hits their ball, and a bomb is placed where they first bounce. Bomb has a radius when planted. Any other player that hits their ball into the bomb radius causes the bomb to go off and send them in a random direction (similar to tornado)
- - - - - - tnt blows up if ball lands in radius, or if it rolls into the radius
- - - - - x when the tnt blows up, have it find all objects in the explosion radius?
- - - - - - - - if another TNT object is found, blow that one up too?
- - - - - - - - if a statue is in the radius, break the statue, and give whoever blew up the TNT the benefit/penalty for good/bad statue breaks?
- - - - - - - - for any balls in the radius, get their position and direction toward the TNT. Have the ball get sent in the opposite direction away from tnt
- - - - - - - - - - - the distance the ball is launched should be relative to how close it is to the tnt? Further away, not launched as far. Closer to the tnt, launched further away?
- - - - - - - - x will need to have the TNT track what balls were blown up, wait for those balls to stop moving after they are launched, and then end the turn
- - - - - - - - - - - x similar process to how the tornado tracks when it hits multiple balls as it moves
- - - - - - - - - - - - might want to do this in PowerupManagerTopDownGolf instead of each TNT incase a ball is launched by 1 TNT and then lands in another TNT circle and blows up that one too?
- - - - - - - - - - - - - - x track the first ball/player that started the TNT chain. When all balls stop moving, then send RPC to that player to finally end their turn?
- - - - - - - - - - - x probably don't need to tell each player "where they landed" or whatever, just the player that started the chain. Still make sure to move balls out of water or back in bounds though
- - - - - x different way the TNT could work: Player "plants" the TNT with their hit. At the end of their turn, the TNT blows up. Any balls in the area of the TNT will get launched
- - - - - - - - x idea would be that the player with the TNT tries to hit their ball to bounce near another player's ball to plant the TNT. Then, the TNT blows up launching any of those balls it was near?
- - - - - - - - x should be a lot simpler? Maybe?
- - - - - - - - x have the EndOfTurnTasks function on the golfball handle await/asyncs. If the player planted TNT, have the EndOfTurnTasks call and await the TNT blow up task?
- - - - - x try to test what happens when a TNT explosion launches a ball into water or out of bounds. Does the player who DID NOT plant the TNT get the penaly? Do they get moved? Likewise for the player that DID plant the TNT
- - - - - x test what happens if the TNT launches all balls into the hole? Will it go to the next hole?
- - - - - - - x manually set the LaunchBall thing to have all balls launch into the hole. Get direction to hole, distance, and then hit off that?
- - - air patrol? Little planes that fly in a circle and if a ball is hit through their "area" in the sky, the planes shoot the ball down? (cause the ball to land a few feet below the planes)
- - - - - - the "area" would be similar to the hoop ring? and how collisions for that work?
- Get rid of all the "CmdTellServerPlayerHoleEndedCompleted" functions and the "_tellPlayerHoleEnded" type variables. Only one message is ever sent to players at a time. Can reuse just one bool and and reuse functions that just send messages. Just one "message from server" function that then tells the player which task to actually start? Instead of all this bullshit where I have 4 different things that are functionally all the same 
x Add favor penalties for using certain clubs on certain terrains
- - x anything but the putter on the green
- - x driver on the fairway
x limit tee off challenges to only specific clubs
- cancellation tokens for all the "tasks" so they don't run after the game has ended or whatever
- - - pass cancellation token to Task functions
- - - when an object is destroyed, make sure the object's cancellation token is destroyed
- - - https://hackernoon.com/the-complete-asynchronous-programming-primer-for-unity-development
- replace "if (!this.IsOwner) { return; }" checks with "[Client(Logging = LoggingType.Off, RequireOwnership = true)]" attributes above the functions/methods instead?
x change accuracy powerup so you always get perfect accuracy no matter what?
x have the ball travel its trajectory at half speed if rocket is in use?
x Use the "AimPosition" control scheme to aim the ball when using a rocket?
- - x will need to enable/disable it appropriately?
- - - - - x enable it when the player hits the ball BUT ONLY if they used the rocket power
- - - - - x disable it whenever _canUseRocketPower is set to false
- - - - - - probably horrendously broken ???
x "Lobby Menu" when player's first join game
- - x list of players and their ready status (and ball color?)
- - x ready up, exit game, buttons
- - x host gets a start game button when all players are readied up
x add esc menu and way to exit out of golf multiplayer game back to main menu
x ability to "configure" a golf game
- - x powerups on/off
- - x weather statues on/off
- - x rain controlled by favor, completely random, or off entirely
- - x wind controlled by favor, completely random, or off entirely
- - - pick what course to play?
- - - - - - maybe create a 3 hole "mini golf" course so there are at least two different ones?
- - x stroke limit? And if so, number of strokes
- fix the fog on statues? On my laptop it looks really weird. Square artifacts or something that look messed up
x rebinding issue with reseting to default for golf:
- - x Check duplicates checks "ResetAllBindings.instance.actionMapsToCheck" which is only the football bindings
- - - - - x add some sort of check to see if it is golf/football check. Have it pull the correct actionmaps for the type
x Add a second camera for the golf UI
- - x then change the "follow the golf ball script" to just set the follow/target thing on the main camera instead of using my script to follow. Should hopefully remove the jittering when watching other players?
- - x short tutorial video: https://www.youtube.com/watch?v=uOeIByY8r3M
- - - doesn't work with cinemachine and pixel perfect cameras...
x make it so driver has an even greater accuracy penalty when hitting off fairway
- - x check if player has teed off already if they are using the driver. If not, increase driver inaccuracy penalty?
- MAke the power up balloons even bigger. Like twice as big. They are still too hard to hit imo
x Remove the "height cap" of hit balls? 
- - x Or at least the cap of their displayed height? It should be fine to keep the shadow moving further down
x have multiple "aim points" that a player can cycle through? Can be good for 5 par holes especially?
- - x finalize hole 8 first then work on that?
- - - make it so that the aim direction changes, and the game only checks if the current hit distance would be out of bound. If it is, checks to see how far it is to the out of bounds line and then sets the aim point there? maybe minus a few pixel units???
- - - - - - decided to just make it so it aims directly at the point
- A more "solid" obstacle like a wall? 
- - - something that can block off a large area but only be one object, unlike trees where you need a ton of them...
- - - brick wall: https://assets.nintendo.com/image/upload/ar_16:9,b_auto:border,c_lpad/b_white/f_auto/q_auto/dpr_2.0/c_scale,w_400/ncom/software/switch/70010000025688/5cee4204dbfdf8aa60020360ab8ee8857884cc388a353c2b7ff7f8ac2ea3f1b3
- - - building: https://www.commonsensemedia.org/sites/default/files/styles/ratio_16_9_small/public/screenshots/csm-game/wall5big.png
- - - - - - https://www.reddit.com/media?url=https%3A%2F%2Fi.redd.it%2Fzxxld48pxpw11.png
- - - - - - https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ0ujXT_Og3gTB-_dg-eI2ScX5ZmI4fXF0ToAzACY8MpSHyxRBgbQMFBJTMI70D1mj1CRg&usqp=CAU
- - - - - - https://i.pinimg.com/1200x/ee/42/ae/ee42ae332060afaab9dad6b636fc1ef0.jpg
- - - wall has been made. In order for it to render correctly, will need to "slice" the wall into parts
- - - - - - every 16 pixels? Maybe use Tilemap to set it ? Or just have each slice as its own game object?
x add "first song" to the playlist, along with synthwave-take-2 after lowering the chord volume and eqing and stuff
x create swing animation for up/down swing
- - x will unfortunately require two animations, one for hitting up/north and another for hitting down/south. One shows the player's back (up), the other the player's chest/face (down)
- - - - - x will be hard...
- - x when using the up/down swing animations, need to set the player sprite's y value to either +0.01 to be "behind" the ball and -0.01 to be "in front" of the ball
- - - - - x then switch back to y:0.0f when using the sideways swing?
- add a "controls" menu to the golf esc menu
- - - at the very least should display controls. Doesn't necessarily need to support rebinding (for now)
- - x idealy would just add all of the settings/control options to the golf escape menu. Might be annoying... but should be easy enough to copy/paste from football's escape menu?
x player prompts that say things like "press space" or whatever should try and pull the key binding and display that?
x music can't be turned off in the current build. It just skips to the next song
- - x also when music is playing the perfect hit sounds don't play?
- - - - - x this issue was caused by the SoundManager in TitleScreen not having those perfect submission sounds. added now
- - x music thing isn't an issue in new build?
x issue where if a player leaves after they have their ball in the hole, the "ballsInHole" number stays the same but the count for ServerGolfPlayers will be decremented by 1
- - x make sure OnDisconnect for a player checks if their ball is in the hole, and if so, decrease ballsInHole by 1?
- - - - - - did this but haven't actually tested it???
- - - or just instead of keeping a tally, just loop through all the balls, check if they're in the hole, add those up, and compare count to number of ServerGolfPlayers
- - - - - - adds more logic to run but also the count will always be <10 so it's not a lot to begin with... and it's only run between turns, not every frame or anything
x how to convert a DLC in steamworks to a soundstrack:
- - x https://partner.steamgames.com/doc/store/application/soundtrackapp#conversion
x prevent flag/hole from being hidden behind player
- - - add SpriteCollision to player sprite
- - - Create a PlayerSpriteCollision script
- - - - - - OnTriggerEnter2D - if the spriteCollision has a parent object, and that parent object has the tag "golfHole," then make the player sprite semi transparent
- - - - - - OnTriggerExit2D - set player sprite back to normal transparency
- - x changed it so it is the player's aiming target that is the trigger: if the target is behind the player sprite, the player becomes transparent. If not, it stays solid
x minigolf mode
- - x putter only
- - - always on the green for ground type
- - x will need to create "borders" that are like low walls to keep the player in bounds
- - - - - x make them simple "wood" walls"
- - - - - x ball will need to bounce off them
- - - - - x need to test if this should be done through the tilemap, or as individual gameobjects that are "obstacles"?
- option to turn off tee off challenge?
- - - maybe no challenge before minigolf? or only do a putter one if it is minigolf?
x add the course name to golf lobbies:
- - x so it will say something like "Game Mode: Golf:Forest" or whatever
- - x have the course name set as an attribute to the steam lobby - in case I ever make custom maps, players would see it's a map they don't own before joining?
x Add holes/pipes to minigolf
- - x they'll be in pairs, similar to the tubes in regular golf
- - - - - - probably have tilemap manager find them specifically and pair them up, just like for the tubes?
- - - when the ball exits the pipe, the ball's new hit movement should be somewhat effected by their previous movement direction
- - - - - - something like:
- - - - - - - - - newMovementDirection = ((previousMovementDirection*0.1) * PipeExitDirection)
- - - - - - - - - may want to check the previousMovementDirection before the above calulation. See if it is "backward" from the pipe direction
- - - - - - - - - - - - aka is it more than 90 degrees from PipeExitDirection. If so, flip it / rotate 180? I think that works out...
- - - - - - new idea for this: Check how "accurate" the player's hit was to the center of the hole. 
- - - - - - - - - - - - Make two lines, one from player to ball, other from player to hole. Compare angle
- - - - - - - - - - - - Cause the ball's exit direction to "drift" depending on how accurate the hit was (closer to angle between two lines being zero the less "drift" there would be)
- - - - - - the above penalizes you for being closer to the hole since player distance to hole would greatly affect the entry angle. Different idea:
- - - - - - - - - - - - get "point of contact" when the ball enters hole collider with collider.ClosestPoint()
- - - - - - - - - - - - Get the "normal" of that point from the hole's collider
- - x create a "spline" or path object for ball to move along? Need to figure out how to make the spline and move an object along it first...
- Fix all the "await" async functions in GameplayManagerTopDownGolf so they use the token? Otherwise can cause crashes if player exits game while one is running?
- - - pass the _cancellationTokenSource.Token to all await functions being called?


### hole six notes:
x make hole slightly closer
x extend water out from the third fairway, down toward second fairway
x move the first spinning hope toward the left so it can be hit a bit easier
- - - move it back right just a few spaces...
x shift fairway near hole so it is pointing from the hole toward the third fairway more
x shorten first fairway by just a hair
x sand trap halfway through last fairway?
x fix balloons in hole 4 that have a height of "medium" instead of "med"
- - x also check balloons in hole 5...
x ok make the hole further away again...

### Next 3 par hole
- hole is only about ~135 yards away
- - - incentivize hitting conservatively with iron but allow for hole in one with driver
- good statue in front of hole, bad statue behind hole
- easy to bounce out of bounds? or into water?
- hill/"boob" surrounding the hole, but with at least 1 square in all directions of free space around the hole
- - - make the hill "zig zag" with diaganol arrows of varying strengths?

### Fishnet / steamworks tutorial stuff:
- https://www.youtube.com/watch?v=U4ATkct6fh4
- https://www.youtube.com/watch?v=-Du_8_NZRWM
- https://www.youtube.com/watch?v=Y95VK4s_hYU
- https://www.youtube.com/watch?v=ZSMpGmKtJio

### Addressables
- https://www.youtube.com/watch?v=C6i_JiRoIfk&list=PLfPlpvCmFmyj7O4oc32zkMn3OOWmXcuF2

### fog shader graph
- - - https://www.youtube.com/watch?v=LDxApLRIOy4

0.2708333
0.28125

- - - other based on Cursed to Golf. Side view, 2d golf platforming
- - - - - - this will likely be easier?
- - - - - - can only hit the ball either right or left
- - - - - - calculate arc of ball based on power and angle
- - - - - - ball bounces off the ground? loses momentum with each bounce?
- - - - - - use unity physics engine for all the ball movement?
- - - - - - draw trajectory line: https://www.youtube.com/watch?v=13KrnisMf14 or https://www.youtube.com/watch?v=p8e4Kpl9b28
- - - - - - - - - 2d trajectory line: https://www.youtube.com/watch?v=RpeRnlLgmv8

### Golf average numbers for different clubs for: distance, launch angle, height, etc.
https://www.globalgolf.com/articles/pro-tip-61/

34, -1, 0




GolfEnvironmentObstacles

x Deactivate player sprite if it is not their turn. Reactivate when their turn starts aka when they become CurrentPlayer
- - x Recenter the camera on the player's ball/player sprite when they become the Current player
- - x Maybe have a slight delay when about to change turns to new player so the camera doesn't immediately change before the player who hits can see where their ball settled
- - - - - x this was already being done with the "tell player the ground type they are on" function...


distance calculator
https://www.calculatorsoup.com/calculators/geometry-plane/distance-two-points.php